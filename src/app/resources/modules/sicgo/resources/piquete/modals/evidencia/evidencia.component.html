<div
    class="modal fade"
    id="modalRegistarOuEditarEvidencia"
    aria-labelledby="modalRegistarOuEditarEvidencia"
    data-bs-backdrop="static"
    data-bs-keyboard="false"
    tabindex="-1"
    aria-hidden="true"
>
    <div
        class="modal-dialog modal-lg"
        role="document"
    >
        <div class="modal-content">
            <div class="modal-header modal-header bg-prima text-white">
                <h4 class="modal-title">
                    <b>
                        {{ this.buscarId() ? "Actualizar" : "Registar" }} Evid√™ncias Criminal
                    </b>
                </h4>
                <a
                    type="button"
                    data-dismiss="modal"
                    aria-label="Close"
                >
                    <i
                        class="bi bi-backspace-reverse-fill cursor-pointer rounded-lg "
                        style="font-size: 1.2em"
                    ></i>
                </a>
            </div>


            

            
            <form
                [formGroup]="this.evidenciaForm"
                (ngSubmit)="this.onSubmit()"
            >










                <div class="modal-body">










                    <div
                        class="tab-content bg-light"
                        id="myTabContent"
                    >
                        <p>
                            Os campos com (
                            <span id="ob">
                                <b>*</b>
                            </span>
                            ) s√£o de car√°ter obrigat√≥rio
                        </p>
                        <div
                            class="tab-pane fade show active"
                            id="dados-primarios"
                            role="tabpanel"
                            aria-labelledby="home-tab"
                            tabindex="0"
                        >
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label>
                                            <b>Data e Hora</b>
                                            <span class="text-danger">*</span>
                                        </label>
                                        <input
                                            type="datetime-local"
                                            [class.is-invalid]="dataValidate"
                                            class="form-control"
                                            formControlName="data"
                                        >
                                    </div>
                                </div>





                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label>
                                            <b>Tipo de Evid√™ncia</b>
                                            <span class="text-danger">*</span>
                                        </label>
                                        <ng-select2
                                            [class.is-invalid]="sicgo_tipo_evidencia_idValidate"
                                            formControlName="sicgo_tipo_evidencia_id"
                                            [options]="this.options"
                                            [data]="this.tipoevidencias"
                                        ></ng-select2>
                                    </div>
                                </div>
                            </div>










                            <div class="row">





                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label>
                                            <b>Import√¢ncia</b>
                                        </label>
                                        <ng-select2
                                            [class.is-invalid]="sicgo_importancia_idValidate"
                                            formControlName="sicgo_importancia_id"
                                            [options]="this.options"
                                            [data]="this.importancias"
                                        ></ng-select2>
                                    </div>
                                </div>





                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label>
                                            <b>Endere√ßo</b>
                                        </label>
                                        <input
                                            type="text"
                                            class="form-control"
                                            [class.is-invalid]="enderecoValidate"
                                            formControlName="endereco"
                                        >
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <!-- Upload de Anexos -->
                                    <div class="form-group">



                                        <div
                                            class="dropzone"
                                            (drop)="onDrop($event)"
                                            (dragover)="onDragOver($event)"
                                            (click)="fileInput.click()"
                                        >
                                            üìÇ Arraste e solte seus arquivos aqui ou clique para adicionar
                                        </div>




                                        <!-- Input oculto -->
                                        <input
                                            #fileInput
                                            id="fileInput"
                                            type="file"
                                            multiple
                                            (change)="onFileSelected($event)"
                                            class="form-control d-none"
                                            accept=".jpg,.jpeg,.png,.pdf,.mp3,.wav,.mp4,.webm"
                                        >








                                        <div class="d-flexs justify-content-between mt-3">
                                            <div
                                                *ngFor="let item of filePreviews; let i = index"
                                                class=" justify-content-between"
                                            > 

                                                <div class="imagem-preview">
                                                    <strong>({{ item.file.size | fileSize }})</strong>



                                                    <button
                                                        (click)="removeFile(i)"
                                                        class="btn btn-danger btn-sm"
                                                    >
                                                        ‚ùå
                                                    </button>
                                                    <!-- Imagem -->
                                                    <img
                                                        *ngIf="item.file.type.startsWith('image/')"
                                                        [src]="item.url"
                                                        alt="Imagem"
                                                    >



                                                    <!-- PDF -->
                                                    <embed
                                                        *ngIf="item.file.type === 'application/pdf'"
                                                        [src]="item.url"
                                                        type="application/pdf"
                                                        width="100%"
                                                        height="300px"
                                                    >
                                                    <!-- DOCX -->
                                                    <a
                                                        *ngIf="item.file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'"
                                                        [href]="item.url"
                                                        target="_blank"
                                                    >
                                                        üìÑ Ver Documento (DOCX)
                                                    </a>
                                                    <!-- √Åudio -->
                                                    <audio
                                                        *ngIf="item.file.type.startsWith('audio/')"
                                                        controls
                                                    >
                                                        <source
                                                            [src]="item.url"
                                                            [type]="item.file.type"
                                                        >
                                                    </audio>
                                                    <!-- V√≠deo -->
                                                    <video
                                                        *ngIf="item.file.type.startsWith('video/')"
                                                        controls
                                                        width="100%"
                                                    >
                                                        <source
                                                            [src]="item.url"
                                                            [type]="item.file.type"
                                                        >
                                                    </video>
                                                </div>




                                            </div>
                                        </div>







                                    </div>
                                </div>








                            </div>
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="form-group">
                                        <label>
                                            <b>Descri√ß√£o</b>
                                            <span class="text-danger">*</span>
                                        </label>
                                        <textarea
                                            [class.is-invalid]="descricaoValidate"
                                            class="form-control"
                                            rows="4"
                                            formControlName="descricao"
                                            required
                                        ></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>










                    </div>











                </div>










                <div class="modal-footer">
                    <div
                        class="btn-group"
                        role="group"
                        aria-label="Basico mixado styles exemplo"
                    >
                        <button
                            type="button"
                            class="btn btn-danger"
                            (click)="this.reiniciarFormulario()"
                        >
                            Limpar
                        </button>
                        <button
                            type="submit"
                            class="btn btn-primary"
                        >
                            <ng-container *ngIf="this.isLoading; else regista">
                                <i class="spinner-border spinner-border-sm mx-1"></i>
                                Carregando..
                            </ng-container>
                            <ng-template #regista>
                                <i class="fa fa-plus mx-1"></i>
                                {{ this.buscarId() ? "Actualizar" : "Registar" }}
                            </ng-template>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
