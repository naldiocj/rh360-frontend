

<div class="modal fade" id="modalRegistarOuEditarBens" aria-labelledby="modalRegistarOuEditarBens" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header bg-prima text-white">
        <h4 class="modal-title"><b>Registro de Tipos de Bens</b></h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div> 
         
      <form [formGroup]="bensForm" (ngSubmit)="this.onSubmit()">
        <div class="modal-body">
          <div class="page__content">
            <div class="page__frame">
                <div class="page-tab-header"> 
                  <p class="ml-0 pl-3"><i class="bi bi-exclamation-triangle-fill text-warning"></i> Os campos marcados com ( <strong class="asterisco">*</strong> ) são de carácter <strong>obrigatório</strong>. </p>
<!-- Nav Tabs -->

                    <nav
                        class="navigation"
                        id="myTab" role="tablist"
                    >
                        <ul class="navigation-menu">
                          <li class="nav-item" role="presentation">
                            <a class="nav-link active nav-tab t--tab" routerLinkActive="active"  data-bs-toggle="tab" data-bs-target="#propriedades" (click)="addPropriedade()">Propriedades</a>
                          </li>
                          <li class="nav-item" role="presentation"> 
                            <a class="nav-link nav-tab t--tab" routerLinkActive="active" data-bs-toggle="tab" data-bs-target="#historico" (click)="addHistorico()">Histórico</a>
            
                          </li>
                             
                            
                        </ul>
                    </nav>
                </div>
            </div>


            <section class="page__segment">
                <div class="page__frame">
                    <div class="tab__content p-3">

                      <div class="col-lg-12">
                        <div class="form-group">
                          <label><b>Propriedade</b>(<span id="ob"><b>*</b></span>)</label>
                          <select class="form-control" [class.is-invalid]="nomeValidate"
                                  formControlName="nome">
                                  <option value="">Selecione um tipo de interveniente</option>
                                  <option value="COMPUTADOR">COMPUTADOR</option>
                                  <option value="DINHEIRO">DINHEIRO</option>
                                  <option value="GERADOR">GERADOR</option>
                                  <option value="PASSAPORTE">PASSAPORTE</option>
                                  <option value="TELEFONE">TELEFONE</option>
                                  <option value="VIATURA">VIATURA</option>
                                </select>
                                <div *ngIf="nomeValidate" class="invalid-feedback">
                                  Nome é obrigatório.
                                </div>
                        </div>
          
                        <div class="form-group">
                          <label><b>Estado</b>(<span id="ob"><b>*</b></span>)</label>
                          <select class="form-control" name="estado" [class.is-invalid]="estadoValidate"
                                  formControlName="estado">
                                  <option value="">Selecione um tipo de interveniente</option>
                                  <option value="BOMSTADO">BOMSTADO</option>
                                  <option value="DESAPARECIDO">DESAPARECIDO</option>
                                  <option value="PARTIDO">PARTIDO</option>
                                  <option value="QUEMADO">QUEMADO</option>
                                  <option value="ROBADO">ROBADO(A)</option>
                                </select>
                                <div *ngIf="estadoValidate" class="invalid-feedback">
                                  Estado é obrigatório.
                                </div>
                        </div>
                      </div>
                       <!-- Propriedades -->
                      <div formArrayName="propriedades"  class="col-lg-12">
 
                        <div *ngFor="let propriedade of propriedadesFormArray.controls; let i = index" [formGroupName]="i">
                          <div  class="form-group">
                            <label for="caracteristica-{{ i }}">Característica:</label>
                          <input id="caracteristica-{{ i }}" class="form-control" formControlName="nome" />

                          </div>
                          
                          <div  class="form-group">
                            <label for="descricao-{{ i }}">Descrição:</label>
                             
                            <input id="descricao-{{ i }}" class="form-control" formControlName="descricao" />
  
                          </div>
                          
                          <button type="button" (click)="removePropriedade(i)">Remover</button>
                        </div>
                       
                      </div>

                      <!-- Históricos -->
                      <div formArrayName="historicos">
                         
                        <div *ngFor="let historico of historicosFormArray.controls; let i = index" [formGroupName]="i">
                          <div  class="form-group">
                            <label for="data-h-{{ i }}">Data:</label>
                          <input id="data-h-{{ i }}" type="date"  class="form-control"  formControlName="data" />
                          
                            </div>
                          
                            <div  class="form-group">
                            <label for="descricao-h-{{ i }}">Descrição:</label>
                            <textarea id="descricao-h-{{ i }}" class="form-control" formControlName="descricao"></textarea>
                            
                            </div>
                          <button type="button" (click)="removeHistorico(i)">Remover</button>
                        </div>
                         
                      </div>


                    </div>
                </div>
            </section>
        </div>
          

          
        </div>
        
        <div class="modal-footer">
          <div
          class="btn-group"
          role="group"
          aria-label="Basico mixado styles exemplo"
        >
          <button
            type="button"
            class="btn btn-danger"
            (click)="this.reiniciarFormulario()"
        >
          Limpar
          </button>
          <button
          [disabled]="
          this.isLoading  || this.submitted || bensForm.invalid
        "
        type="submit"
        class="btn btn-primary"
      >
        <ng-container *ngIf="this.isLoading; else regista">
          <i class="spinner-border spinner-border-sm mx-1"></i>
          Carregando..
        </ng-container>
        <ng-template #regista>
          <i class="fa fa-plus mx-1"></i>
          Registar
        </ng-template>
          </button>
        </div>
      </div>
    </form>
    </div>
  </div>
</div>



