<div class="modal fade" id="delete-modal" style="border-radius: unset">
  <div class="modal-dialog modal-dialog-centered modal-dialog-ms">
    <div class="modal-content">
      <div class="modal-header">
        <div
          class="modal-title w-100 d-flex justify-content-between align-items-center"
        >
          Eliminação de Calibre
          <a
            data-dismiss="modal"
            class="bi bi-x-lg text-danger"
            style="cursor: pointer"
          ></a>
        </div>
      </div>
      <div
        class="modal-body text-center"
        style="font-size: 16px; color: #041b43"
      >
        <span>Confirmas a eliminação ?</span>
        <div class="btn-groups my-2">
          <a
            class="btn btn-link"
            style="text-decoration: none; color: #041b43"
            (click)="this.delete_(this.id)"
            >Sim</a
          >
          <div
            class="btn btn-link"
            data-dismiss="modal"
            style="text-decoration: none; color: #041b43"
          >
            Não
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="content">
  <div class="row">
    <div class="col-sm-7">
      <h4 style="color: #002d59" class="page-title">
        <b>Listagem de Armas Orgânicas</b>
      </h4>
      <h4 style="font-size: 14px">Sistema de Gestão de <b> armamento</b></h4>
    </div>
    <div class="col-sm-5 text-right m-b-20"></div>
  </div>
  <div class="row">
    <nav class="navbar navbar-light bg-light">
      <form class="form-inline">
        <select
          class="form-control mr-sm-1"
          (change)="filtrarPagina('perPage', $event)"
        >
          <option *ngFor="let item of [10, 20, 50, 100]" [value]="item">
            {{ item }}
          </option>
        </select>
        <input
          class="form-control mr-sm-1"
          type="search"
          placeholder="Pesquisa ..."
          [ngModel]="filtro.search"
          (ngModelChange)="filtrarPagina('search', $event)"
        />

        <button
          id="btpe1"
          class="btn btn-outline-success my-2 my-sm-0"
          type="submit"
        >
          <i
            style="font-size: 14px"
            class="fa fa-refresh fa-spin fa-3x fa-fw"
            (click)="recarregarPagina()"
          ></i
          ><b> Recarregar</b>
        </button>
      </form>
    </nav>

    <div class="col-md-12">
      <table
        class="table table-border table-striped custom-table datatable mb-0"
      >
        <thead>
          <tr>
            <th>ID</th>
            <th>Classificação</th>
            <th>Livrete</th>
            <th>Série</th>
            <th>Marca</th>
            <th>Tipo</th>
            <th>Calibre</th>
            <th>Estado</th>
            <th>País de Origem</th>
            <th>Ano de Fábrico</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="
              let item of armas
                | paginate
                  : {
                      itemsPerPage: this.pagination.per_page,
                      currentPage: this.pagination.current_page,
                      totalItems: this.pagination.total
                    };
              index as i
            "
          >
            <td>{{ "#" }}</td>
            <td>{{ item.classificacao }}</td>
            <td>{{ item.livrete == "" ? "N/S" : item.livrete }}</td>
            <td>{{ item.serie }}</td>
            <td>{{ item.marca }}</td>
            <td>{{ item.tipo_arma }}</td>
            <td>{{ item.calibre_arma }}</td>
            <td>
              <a
                [class]="
                  item.estado == 'AT'
                    ? 'btn btn-lg btn-success text-white'
                    : 'btn btn-lg btn-danger text-white'
                "
                >{{ item.estado }}</a
              >
            </td>
            <td>{{ item.pais }}</td>
            <td>{{ item.ano_fabrico }}</td>
            <td class="text-center">
              <div class="dropdown dropdown-action">
                <a
                  href="#"
                  class="action-icon dropdown-toggle"
                  data-toggle="dropdown"
                  aria-expanded="false"
                  ><i class="fa fa-ellipsis-v"></i
                ></a>
                <div class="dropdown-menu dropdown-menu-right">
                  <!-- <a class="dropdown-item" href="profile.html"><i class="fa fa-eye m-r-5"></i>
                                            Visualizar</a> -->
                  <a
                    class="dropdown-item"
                    href="#"
                    data-toggle="modal"
                    data-target="#actualizar"
                    (click)="this.get(item)"
                    *ngIf="this.is == 0 || this.is == 1"
                    ><i class="fa fa-pencil m-r-5"></i> Editar</a
                  >

                  <a
                    class="dropdown-item"
                    (click)="extraviar(item)"
                    data-toggle="modal"
                    data-target="#extraviar2"
                    href="#"
                    *ngIf="this.is == 0 || this.is == 1"
                    ><i class="bi bi-archive"></i> Extraviar</a
                  >
                  <a
                    class="dropdown-item"
                    (click)="extraviar(item)"
                    data-toggle="modal"
                    data-target="#crime2"
                    href="#"
                    *ngIf="this.is == 0 || this.is == 1"
                    ><i class="fa-solid fa-gun"></i> Envolver em crime</a
                  >
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="col-md-12">
      <div class="row">
        <div class="col-sm-6">
          Mostrando de {{ this.pagination.current_page }} á
          {{ this.pagination.per_page }} de {{ this.pagination.total }} Registo
        </div>
        <div class="col-sm-6">
          <div class="float-right">
            <pagination-controls
              (pageChange)="this.filtrarPagina('page', $event)"
              previousLabel="Anterior"
              nextLabel="Próximo"
            ></pagination-controls>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="actualizar"
  aria-labelledby="classes"
  aria-hidden="true"
>
  <div
    class="modal-dialog"
    role="document"
    style="overflow-y: hidden; min-width: 70%"
  >
    <div class="modal-content">
      <div class="modal-header">
        <h5><i class="fa fa-gun"></i> Registro de Arma Orgânica</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true" (click)="this.resetForm()">&times;</span>
        </button>
      </div>

      <div class="content">
        <form [formGroup]="this.form" (submit)="editar()">
          <div class="modal-body">
            <div class="row">
              <div class="form-group col-md-4">
                <label>
                  <b>
                    Marca da arma:
                    <span class="text-danger"> *</span>
                  </b>
                </label>

                <ng-select2
                  [options]="options"
                  formControlName="marca_arma_id"
                  [data]="this.marcas"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Tipo de armas:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="modelo_id"
                  [data]="this.tipos"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Calibre da arma:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="calibre_arma_id"
                  [data]="this.calibres"
                >
                </ng-select2>
              </div>
              <div class="form-group col-md-4">
                <label>
                  <b>
                    País de origem:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="pai_id"
                  [data]="this.pais"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Ano de Fabrico:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <input
                  formControlName="ano_fabrico"
                  type="date"
                  class="form-control"
                  onfocus="(this.type='date')"
                />
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b> Número de série: </b>
                </label>
                <input
                  formControlName="serie"
                  type="serie"
                  class="form-control"
                  maxlength="6"
                />
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b> Número do Livrete </b>
                </label>
                <input
                  formControlName="livrete"
                  type="livrete"
                  maxlength="10"
                  class="form-control"
                />
              </div>
              <div class="form-group col-md-4">
                <label>
                  <b>
                    Descrição da acção:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <input
                  formControlName="descricao"
                  maxlength="60"
                  type="descricao"
                  class="form-control"
                />
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-danger btn-square" type="reset">
              <span class="fa fa-refresh"></span> Limpar
            </button>
            <button class="btn btn-dark btn-square" type="submit">
              <span class="fa fa-refresh"></span> Registar
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="extraviar2"
  aria-labelledby="classes"
  aria-hidden="true"
>
  <div
    class="modal-dialog"
    role="document"
    style="overflow-y: hidden; min-width: 70%"
  >
    <div class="modal-content">
      <div class="modal-header">
        <h5><i class="fa fa-gun"></i> Extravio de Arma</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true" (click)="this.resetForm()">&times;</span>
        </button>
      </div>

      <div class="content">
        <form [formGroup]="this.form" (submit)="extraviara()">
          <div class="modal-body">
            <div class="row">
              <div class="form-group col-md-4">
                <label>
                  <b>
                    Classificação da Arma
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="classificacao_arma_id"
                  [data]="this.classes"
                  [disabled]="true"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Marca da arma:
                    <span class="text-danger"> *</span>
                  </b>
                </label>

                <ng-select2
                  [options]="options"
                  formControlName="marca_arma_id"
                  [data]="this.marcas"
                  [disabled]="true"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Tipo de armas:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="modelo_id"
                  [data]="this.tipos"
                  [disabled]="true"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Calibre da arma:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="calibre_arma_id"
                  [data]="this.calibres"
                  [disabled]="true"
                >
                </ng-select2>
              </div>
              <div class="form-group col-md-4">
                <label>
                  <b>
                    País de origem:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="pai_id"
                  [data]="this.pais"
                  [disabled]="true"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Ano de Fabrico:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <input
                  formControlName="ano_fabrico"
                  type="date"
                  class="form-control"
                  onfocus="(this.type='date')"
                  readonly
                  required
                />
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b> Número de série: </b>
                </label>
                <input
                  formControlName="serie"
                  type="serie"
                  class="form-control"
                  readonly
                  required
                />
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b> Número do Livrete </b>
                </label>
                <input
                  formControlName="livrete"
                  type="livrete"
                  class="form-control"
                  readonly
                  required
                />
              </div>

              <div class="form-group col-12">
                <label>
                  <b>
                    Anexo:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <input
                  (change)="pegarFile($event)"
                  type="file"
                  class="form-control"
                />
              </div>

              <div class="form-group col-12">
                <label>
                  <b>
                    Descrição da acção:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <textarea
                  name="desc"
                  id="descricao"
                  class="w-100 row"
                  style="margin-left: 5px; height: 60px"
                  formControlName="descricao"
                  placeholder="Porque deseja torna está arma extraviada?"
                  required
                ></textarea>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-danger btn-square" type="reset">
              <span class="fa fa-refresh"></span> Limpar
            </button>
            <button class="btn btn-dark btn-square" type="submit">
              <span class="fa fa-refresh"></span> Extraviar
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>



<div
  class="modal fade"
  id="crime2"
  aria-labelledby="classes"
  aria-hidden="true"
>
  <div
    class="modal-dialog"
    role="document"
    style="overflow-y: hidden; min-width: 70%"
  >
    <div class="modal-content">
      <div class="modal-header">
        <h5><i class="fa fa-gun"></i> Envolver Arma em crime</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true" (click)="this.resetForm()">&times;</span>
        </button>
      </div>

      <div class="content">
        <form [formGroup]="this.form" (submit)="crimera()">
          <div class="modal-body">
            <div class="row">
              <div class="form-group col-md-4">
                <label>
                  <b>
                    Classificação da Arma
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="classificacao_arma_id"
                  [data]="this.classes"
                  [disabled]="true"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Marca da arma:
                    <span class="text-danger"> *</span>
                  </b>
                </label>

                <ng-select2
                  [options]="options"
                  formControlName="marca_arma_id"
                  [data]="this.marcas"
                  [disabled]="true"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Tipo de armas:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="modelo_id"
                  [data]="this.tipos"
                  [disabled]="true"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Calibre da arma:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="calibre_arma_id"
                  [data]="this.calibres"
                  [disabled]="true"
                >
                </ng-select2>
              </div>
              <div class="form-group col-md-4">
                <label>
                  <b>
                    País de origem:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <ng-select2
                  [options]="options"
                  formControlName="pai_id"
                  [data]="this.pais"
                  [disabled]="true"
                >
                </ng-select2>
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b>
                    Ano de Fabrico:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <input
                  formControlName="ano_fabrico"
                  type="date"
                  class="form-control"
                  onfocus="(this.type='date')"
                  readonly
                  required
                />
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b> Número de série: </b>
                </label>
                <input
                  formControlName="serie"
                  maxlength="6"
                  type="serie"
                  class="form-control"
                  readonly
                  required
                />
              </div>

              <div class="form-group col-md-4">
                <label>
                  <b> Número do Livrete </b>
                </label>
                <input
                  formControlName="livrete"
                  type="livrete"
                  maxlength="10"
                  class="form-control"
                  readonly
                  required
                />
              </div>

              <div class="form-group col-12">
                <label>
                  <b>
                    Anexo:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <input
                  (change)="pegarFile($event)"
                  type="file"
                  class="form-control"
                />
              </div>

              <div class="form-group col-12">
                <label>
                  <b>
                    Descrição da acção:
                    <span class="text-danger"> *</span>
                  </b>
                </label>
                <textarea
                  name="desc"
                  id="descricao"
                  class="w-100 row"
                  style="margin-left: 5px; height: 60px"
                  formControlName="descricao"
                  maxlength="60"
                  placeholder="Conte sobre o que aconteceu"
                  required
                ></textarea>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-danger btn-square" type="reset">
              <span class="fa fa-refresh"></span> Limpar
            </button>
            <button class="btn btn-dark btn-square" type="submit">
              <span class="fa fa-refresh"></span> Confirmar
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
